<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Multi Alphabet</title>
    <style>
      :root {
        --header-font: "Atkinson Hyperlegible Next";
        --body-font: "Inter";
        --mono-font: "0xProto";

        --light-blue: #4da6ff;
        --dark-blue: #4b5bab;
        --darkest-blue: #07060c;
        --dark-purple: #5a265e;
        --bg-grn: #ffffeb;
        --border-color: #bddeff;
      }
    </style>
  </head>
  <body>
    <script>
      const plainAlphabetMapping = (...alphabetString) => {
        console.log(alphabetString, alphabetString[0]);

        return (mappingString) =>
          [...mappingString]
            .map((letter, i) => {
              const charCode = letter.charCodeAt(0);
              if (charCode >= 65 && charCode <= 91) {
                return alphabetString[charCode - 65] ?? letter;
              }
              if (charCode >= 97 && charCode <= 123) {
                return alphabetString[charCode - 97 + 26] ?? letter;
              }

              return letter;
            })
            .join("");
      };

      const translators = {
        Bold: plainAlphabetMapping(
          "ùêÄ",
          "ùêÅ",
          "ùêÇ",
          "ùêÉ",
          "ùêÑ",
          "ùêÖ",
          "ùêÜ",
          "ùêá",
          "ùêà",
          "ùêâ",
          "ùêä",
          "ùêã",
          "ùêå",
          "ùêç",
          "ùêé",
          "ùêè",
          "ùêê",
          "ùêë",
          "ùêí",
          "ùêì",
          "ùêî",
          "ùêï",
          "ùêñ",
          "ùêó",
          "ùêò",
          "ùêô",
          "ùêö",
          "ùêõ",
          "ùêú",
          "ùêù",
          "ùêû",
          "ùêü",
          "ùê†",
          "ùê°",
          "ùê¢",
          "ùê£",
          "ùê§",
          "ùê•",
          "ùê¶",
          "ùêß",
          "ùê®",
          "ùê©",
          "ùê™",
          "ùê´",
          "ùê¨",
          "ùê≠",
          "ùêÆ",
          "ùêØ",
          "ùê∞",
          "ùê±",
          "ùê≤",
          "ùê≥"
        ),
        Italic: plainAlphabetMapping(
          "ùê¥",
          "ùêµ",
          "ùê∂",
          "ùê∑",
          "ùê∏",
          "ùêπ",
          "ùê∫",
          "ùêª",
          "ùêº",
          "ùêΩ",
          "ùêæ",
          "ùêø",
          "ùëÄ",
          "ùëÅ",
          "ùëÇ",
          "ùëÉ",
          "ùëÑ",
          "ùëÖ",
          "ùëÜ",
          "ùëá",
          "ùëà",
          "ùëâ",
          "ùëä",
          "ùëã",
          "ùëå",
          "ùëç",
          "ùëé",
          "ùëè",
          "ùëê",
          "ùëë",
          "ùëí",
          "ùëì",
          "ùëî",
          "ùíâ",
          "ùëñ",
          "ùëó",
          "ùëò",
          "ùëô",
          "ùëö",
          "ùëõ",
          "ùëú",
          "ùëù",
          "ùëû",
          "ùëü",
          "ùë†",
          "ùë°",
          "ùë¢",
          "ùë£",
          "ùë§",
          "ùë•",
          "ùë¶",
          "ùëß"
        ),
        "Bold Italic": plainAlphabetMapping(
          "ùë®",
          "ùë©",
          "ùë™",
          "ùë´",
          "ùë¨",
          "ùë≠",
          "ùëÆ",
          "ùëØ",
          "ùë∞",
          "ùë±",
          "ùë≤",
          "ùë≥",
          "ùë¥",
          "ùëµ",
          "ùë∂",
          "ùë∑",
          "ùë∏",
          "ùëπ",
          "ùë∫",
          "ùëª",
          "ùëº",
          "ùëΩ",
          "ùëæ",
          "ùëø",
          "ùíÄ",
          "ùíÅ",
          "ùíÇ",
          "ùíÉ",
          "ùíÑ",
          "ùíÖ",
          "ùíÜ",
          "ùíá",
          "ùíà",
          "ùíâ",
          "ùíä",
          "ùíã",
          "ùíå",
          "ùíç",
          "ùíé",
          "ùíè",
          "ùíê",
          "ùíë",
          "ùíí",
          "ùíì",
          "ùíî",
          "ùíï",
          "ùíñ",
          "ùíó",
          "ùíò",
          "ùíô",
          "ùíö",
          "ùíõ"
        ),
        "Italic Cursive": plainAlphabetMapping(
          "ùíú",
          "ùìë",
          "ùíû",
          "ùíü",
          "ùìî",
          "ùìï",
          "ùí¢",
          "ùìó",
          "I",
          "ùìò",
          "ùí•",
          "ùí¶",
          "ùìõ",
          "ùìú",
          "ùí©",
          "ùí™",
          "ùí´",
          "ùí¨",
          "ùíÆ",
          "ùíØ",
          "ùí∞",
          "ùí±",
          "ùí≤",
          "ùí≥",
          "ùí¥",
          "ùíµ",
          "ùí∂",
          "ùí∑",
          "ùí∏",
          "ùíπ",
          "ùìÆ",
          "ùíª",
          "ùì∞",
          "ùíΩ",
          "ùíæ",
          "ùíø",
          "ùìÄ",
          "ùìÅ",
          "ùìÇ",
          "ùìÉ",
          "ùì∏",
          "ùìÖ",
          "ùìÜ",
          "ùìá",
          "ùìà",
          "ùìâ",
          "ùìä",
          "ùìã",
          "ùìå",
          "ùìç",
          "ùìé",
          "ùìè"
        ),
        "Bold Italic Cursive": plainAlphabetMapping(
          "ùìê",
          "ùìë",
          "ùìí",
          "ùìì",
          "ùìî",
          "ùìï",
          "ùìñ",
          "ùìó",
          "ùìò",
          "ùìô",
          "ùìö",
          "ùìõ",
          "ùìú",
          "ùìù",
          "ùìû",
          "ùìü",
          "ùì†",
          "ùì°",
          "ùì¢",
          "ùì£",
          "ùì§",
          "ùì•",
          "ùì¶",
          "ùìß",
          "ùì®",
          "ùì©",
          "ùì™",
          "ùì´",
          "ùì¨",
          "ùì≠",
          "ùìÆ",
          "ùìØ",
          "ùì∞",
          "ùì±",
          "ùì≤",
          "ùì≥",
          "ùì¥",
          "ùìµ",
          "ùì∂",
          "ùì∑",
          "ùì∏",
          "ùìπ",
          "ùì∫",
          "ùìª",
          "ùìº",
          "ùìΩ",
          "ùìæ",
          "ùìø",
          "ùîÄ",
          "ùîÅ",
          "ùîÇ",
          "ùîÉ"
        ),
        Fraktur: plainAlphabetMapping(
          "ùîÑ",
          "ùîÖ",
          "ùïÆ",
          "ùîá",
          "ùîà",
          "ùîâ",
          "ùîä",
          "ùï≥",
          "ùï¥",
          "ùîç",
          "ùîé",
          "ùîè",
          "ùîê",
          "ùîë",
          "ùîí",
          "ùîì",
          "ùîî",
          "ùïΩ",
          "ùîñ",
          "ùîó",
          "ùîò",
          "ùîô",
          "ùîö",
          "ùîõ",
          "ùîú",
          "Z",
          "ùîû",
          "ùîü",
          "ùî†",
          "ùî°",
          "ùî¢",
          "ùî£",
          "ùî§",
          "ùî•",
          "ùî¶",
          "ùîß",
          "ùî®",
          "ùî©",
          "ùî™",
          "ùî´",
          "ùî¨",
          "ùî≠",
          "ùîÆ",
          "ùîØ",
          "ùî∞",
          "ùî±",
          "ùî≤",
          "ùî≥",
          "ùî¥",
          "ùîµ",
          "ùî∂",
          "ùî∑"
        ),
        "Bold Fraktur": plainAlphabetMapping(
          "ùï¨",
          "ùï≠",
          "ùïÆ",
          "ùïØ",
          "ùï∞",
          "ùï±",
          "ùï≤",
          "ùï≥",
          "ùï¥",
          "ùïµ",
          "ùï∂",
          "ùï∑",
          "ùï∏",
          "ùïπ",
          "ùï∫",
          "ùïª",
          "ùïº",
          "ùïΩ",
          "ùïæ",
          "ùïø",
          "ùñÄ",
          "ùñÅ",
          "ùñÇ",
          "ùñÉ",
          "ùñÑ",
          "ùñÖ",
          "ùñÜ",
          "ùñá",
          "ùñà",
          "ùñâ",
          "ùñä",
          "ùñã",
          "ùñå",
          "ùñç",
          "ùñé",
          "ùñè",
          "ùñê",
          "ùñë",
          "ùñí",
          "ùñì",
          "ùñî",
          "ùñï",
          "ùññ",
          "ùñó",
          "ùñò",
          "ùñô",
          "ùñö",
          "ùñõ",
          "ùñú",
          "ùñù",
          "ùñû",
          "ùñü"
        ),
        Draftsman: plainAlphabetMapping(
          "ùî∏",
          "ùîπ",
          "C",
          "ùîª",
          "ùîº",
          "ùîΩ",
          "ùîæ",
          "H",
          "ùïÄ",
          "ùïÅ",
          "ùïÇ",
          "ùïÉ",
          "ùïÑ",
          "N",
          "ùïÜ",
          "P",
          "Q",
          "R",
          "ùïä",
          "ùïã",
          "ùïå",
          "ùïç",
          "ùïé",
          "ùïè",
          "ùïê",
          "Z",
          "ùïí",
          "ùïì",
          "ùïî",
          "ùïï",
          "ùïñ",
          "ùïó",
          "ùïò",
          "ùïô",
          "ùïö",
          "ùïõ",
          "ùïú",
          "ùïù",
          "ùïû",
          "ùïü",
          "ùï†",
          "ùï°",
          "ùï¢",
          "ùï£",
          "ùï§",
          "ùï•",
          "ùï¶",
          "ùïß",
          "ùï®",
          "ùï©",
          "ùï™",
          "ùï´"
        ),
        Wide: plainAlphabetMapping(
          "ùñ†",
          "ùñ°",
          "ùñ¢",
          "ùñ£",
          "ùñ§",
          "ùñ•",
          "ùñ¶",
          "ùñß",
          "ùñ®",
          "ùñ©",
          "ùñ™",
          "ùñ´",
          "ùñ¨",
          "ùñ≠",
          "ùñÆ",
          "ùñØ",
          "ùñ∞",
          "ùñ±",
          "ùñ≤",
          "ùñ≥",
          "ùñ¥",
          "ùñµ",
          "ùñ∂",
          "ùñ∑",
          "ùñ∏",
          "ùñπ",
          "ùñ∫",
          "ùñª",
          "ùñº",
          "ùñΩ",
          "ùñæ",
          "ùñø",
          "ùóÄ",
          "ùóÅ",
          "ùóÇ",
          "ùóÉ",
          "ùóÑ",
          "ùóÖ",
          "ùóÜ",
          "ùóá",
          "ùóà",
          "ùóâ",
          "ùóä",
          "ùóã",
          "ùóå",
          "ùóç",
          "ùóé",
          "ùóè",
          "ùóê",
          "ùóë",
          "ùóí",
          "ùóì"
        ),
        "Bold Wide": plainAlphabetMapping(
          "ùóî",
          "ùóï",
          "ùóñ",
          "ùóó",
          "ùóò",
          "ùóô",
          "ùóö",
          "ùóõ",
          "ùóú",
          "ùóù",
          "ùóû",
          "ùóü",
          "ùó†",
          "ùó°",
          "ùó¢",
          "ùó£",
          "ùó§",
          "ùó•",
          "ùó¶",
          "ùóß",
          "ùó®",
          "ùó©",
          "ùó™",
          "ùó´",
          "ùó¨",
          "ùó≠",
          "ùóÆ",
          "ùóØ",
          "ùó∞",
          "ùó±",
          "ùó≤",
          "ùó≥",
          "ùó¥",
          "ùóµ",
          "ùó∂",
          "ùó∑",
          "ùó∏",
          "ùóπ",
          "ùó∫",
          "ùóª",
          "ùóº",
          "ùóΩ",
          "ùóæ",
          "ùóø",
          "ùòÄ",
          "ùòÅ",
          "ùòÇ",
          "ùòÉ",
          "ùòÑ",
          "ùòÖ",
          "ùòÜ",
          "ùòá"
        ),
        "Wide Italic": plainAlphabetMapping(
          "ùòà",
          "ùòâ",
          "ùòä",
          "ùòã",
          "ùòå",
          "ùòç",
          "ùòé",
          "ùòè",
          "ùòê",
          "ùòë",
          "ùòí",
          "ùòì",
          "ùòî",
          "ùòï",
          "ùòñ",
          "ùòó",
          "ùòò",
          "ùòô",
          "ùòö",
          "ùòõ",
          "ùòú",
          "ùòù",
          "ùòû",
          "ùòü",
          "ùò†",
          "ùò°",
          "ùò¢",
          "ùò£",
          "ùò§",
          "ùò•",
          "ùò¶",
          "ùòß",
          "ùò®",
          "ùò©",
          "ùò™",
          "ùò´",
          "ùò¨",
          "ùò≠",
          "ùòÆ",
          "ùòØ",
          "ùò∞",
          "ùò±",
          "ùò≤",
          "ùò≥",
          "ùò¥",
          "ùòµ",
          "ùò∂",
          "ùò∑",
          "ùò∏",
          "ùòπ",
          "ùò∫",
          "ùòª"
        ),
        "Bold Wide Italic": plainAlphabetMapping(
          "ùòº",
          "ùòΩ",
          "ùòæ",
          "ùòø",
          "ùôÄ",
          "ùôÅ",
          "ùôÇ",
          "ùôÉ",
          "ùôÑ",
          "ùôÖ",
          "ùôÜ",
          "ùôá",
          "ùôà",
          "ùôâ",
          "ùôä",
          "ùôã",
          "ùôå",
          "ùôç",
          "ùôé",
          "ùôè",
          "ùôê",
          "ùôë",
          "ùôí",
          "ùôì",
          "ùôî",
          "ùôï",
          "ùôñ",
          "ùôó",
          "ùôò",
          "ùôô",
          "ùôö",
          "ùôõ",
          "ùôú",
          "ùôù",
          "ùôû",
          "ùôü",
          "ùô†",
          "ùô°",
          "ùô¢",
          "ùô£",
          "ùô§",
          "ùô•",
          "ùô¶",
          "ùôß",
          "ùô®",
          "ùô©",
          "ùô™",
          "ùô´",
          "ùô¨",
          "ùô≠",
          "ùôÆ",
          "ùôØ"
        ),
        Typewriter: plainAlphabetMapping(
          "ùô∞",
          "ùô±",
          "ùô≤",
          "ùô≥",
          "ùô¥",
          "ùôµ",
          "ùô∂",
          "ùô∑",
          "ùô∏",
          "ùôπ",
          "ùô∫",
          "ùôª",
          "ùôº",
          "ùôΩ",
          "ùôæ",
          "ùôø",
          "ùöÄ",
          "ùöÅ",
          "ùöÇ",
          "ùöÉ",
          "ùöÑ",
          "ùöÖ",
          "ùöÜ",
          "ùöá",
          "ùöà",
          "ùöâ",
          "ùöä",
          "ùöã",
          "ùöå",
          "ùöç",
          "ùöé",
          "ùöè",
          "ùöê",
          "ùöë",
          "ùöí",
          "ùöì",
          "ùöî",
          "ùöï",
          "ùöñ",
          "ùöó",
          "ùöò",
          "ùöô",
          "ùöö",
          "ùöõ",
          "ùöú",
          "ùöù",
          "ùöû",
          "ùöü",
          "ùö†",
          "ùö°",
          "ùö¢",
          "ùö£"
        ),
        Doublewide: plainAlphabetMapping(
          "Ôº°",
          "Ôº¢",
          "Ôº£",
          "Ôº§",
          "Ôº•",
          "Ôº¶",
          "Ôºß",
          "Ôº®",
          "Ôº©",
          "Ôº™",
          "Ôº´",
          "Ôº¨",
          "Ôº≠",
          "ÔºÆ",
          "ÔºØ",
          "Ôº∞",
          "Ôº±",
          "Ôº≤",
          "Ôº≥",
          "Ôº¥",
          "Ôºµ",
          "Ôº∂",
          "Ôº∑",
          "Ôº∏",
          "Ôºπ",
          "Ôº∫",
          "ÔΩÅ",
          "ÔΩÇ",
          "ÔΩÉ",
          "ÔΩÑ",
          "ÔΩÖ",
          "ÔΩÜ",
          "ÔΩá",
          "ÔΩà",
          "ÔΩâ",
          "ÔΩä",
          "ÔΩã",
          "ÔΩå",
          "ÔΩç",
          "ÔΩé",
          "ÔΩè",
          "ÔΩê",
          "ÔΩë",
          "ÔΩí",
          "ÔΩì",
          "ÔΩî",
          "ÔΩï",
          "ÔΩñ",
          "ÔΩó",
          "ÔΩò",
          "ÔΩô",
          "ÔΩö"
        ),
      };

      const translationDisplays = [];

      const debounce = (func, delay) => {
        let timeoutId;

        return function (...args) {
          clearTimeout(timeoutId);

          timeoutId = setTimeout(() => {
            func.apply(this, args);
          }, delay);
        };
      };

      const changeInputText = () => {
        const t = document.getElementById("multi-alphabet-input");
        const text = t.innerText;

        if (!!text && translationDisplays.length === 0) {
          addTranslation(Object.keys(translators)[0]);
        }

        translationDisplays.forEach((display) => {
          display.update(text);
        });
      };

      const updateList = () => {
        namesUsed = new Set(translationDisplays.map((b) => b.name));

        const selectElt = document.getElementById("multi-alphabet-selector");
        [...selectElt.querySelectorAll("option")].forEach((e) => {
          e.disabled = namesUsed.has(e.value);
        });
        changeInputText();
      };

      const addTranslation = (name) => {
        const template = document.getElementById("translation-item-template");
        const resultElt = document.getElementById("multi-alphabet-results");

        const translationElt = document.importNode(
          template.content,
          true
        ).firstElementChild;
        resultElt.appendChild(translationElt);

        const translationTextelt = translationElt.querySelector(".translation");
        const copyButton = translationElt.querySelector(".copy-button");
        const deleteButton = translationElt.querySelector(".remove-button");

        translationElt.querySelector(
          ".name"
        ).innerText = `${name} (${translators[name](name)})`;

        copyButton.addEventListener("click", (e) => {
          navigator.clipboard.writeText(translationTextelt.innerText);
        });

        deleteButton.addEventListener("click", (e) => {
          const idx = translationDisplays.indexOf((e) => e.name === name);
          translationDisplays.pop(idx);
          resultElt.removeChild(translationElt);
        });

        translationDisplays.push({
          name: name,
          update: (text) => {
            const translationBlank = text.trim().length === 0;
            copyButton.disabled = translationBlank;

            translationTextelt.innerText = translators[name](text);
          },
        });
        updateList();

        console.log(translationDisplays);
      };

      const bind = () => {
        const selectElt = document.getElementById("multi-alphabet-selector");
        selectElt.addEventListener("change", (e) => {
          addTranslation(e.target.value);
        });

        Object.entries(translators).forEach(([name, translator]) => {
          const option = document.createElement("option");
          option.value = name;
          option.textContent = `${name} (${translator(name)})`;

          selectElt.appendChild(option);
        });

        const inputElt = document.getElementById("multi-alphabet-input");
        inputElt.addEventListener("input", debounce(changeInputText, 150));
      };

      document.addEventListener("DOMContentLoaded", bind);
    </script>
    <style type="text/css">
      div.multi-alphabet-input-area {
        border: 1px solid rgba(0, 0, 0, 0.125);
        border-radius: 4px;
        padding: 4px;
        font-size: larger;

        &:empty::before {
          content: "Type your dumb words here";
          opacity: 0.75;
          font-style: italic;
        }

        margin-bottom: 1em;
      }

      div.translation-item {
        border: 1px solid rgba(0, 0, 0, 0.125);
        border-radius: 4px;
      }

      div.translation-text {
        padding: 4px;
        white-space: pre;
        padding: 4px;
        font-size: larger;
      }

      div.translation-header {
        background-color: rgba(0, 0, 0, 0.075);
        padding: 2px;
        user-select: none;
        display: flex;
        flex-direction: row;

        & > * {
          flex-grow: 1;
        }

        .copy-button,
        .remove-button {
          flex-grow: 0;
        }
      }

      div.multi-alphabet-add-another {
        select {
          font-size: large;
          font-weight: bold;
        }

        margin-top: 4px;
        margin-bottom: 4px;
        user-select: none;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-end;
      }

      div.translation-item:not(:last-child) {
        border-bottom: 1px solid rgba(0, 0, 0, 0.125);
        padding-bottom: 4px;
        margin-bottom: 4px;
      }
    </style>
    <div class="multi-alphabet">
      <div
        id="multi-alphabet-input"
        class="multi-alphabet-input-area"
        contenteditable="true"
      ></div>
      <div class="multi-alphabet-results" id="multi-alphabet-results"></div>
      <div class="multi-alphabet-add-another">
        Add another:
        <select
          class="multi-alphabet-translation-selector"
          id="multi-alphabet-selector"
        ></select>
      </div>

      <template id="translation-item-template">
        <div class="translation-item">
          <div class="translation-header">
            <div class="name translator-name"></div>
            <button class="copy-button">üìã</button>
            <button class="remove-button">‚ùå</button>
          </div>
          <div class="translation translation-text"></div>
        </div>
      </template>
    </div>
  </body>
</html>
